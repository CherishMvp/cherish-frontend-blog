import{_ as n,c as a,a2 as i,o as p}from"./chunks/framework.BeuUUHFt.js";const d=JSON.parse('{"title":"起步","description":"","frontmatter":{},"headers":[],"relativePath":"4.库/Monaco-Editor/Monaco-Editor.md","filePath":"4.库/Monaco-Editor/Monaco-Editor.md","lastUpdated":1731997977000}'),l={name:"4.库/Monaco-Editor/Monaco-Editor.md"};function e(t,s,r,h,k,c){return p(),a("div",null,s[0]||(s[0]=[i(`<h1 id="起步" tabindex="-1">起步 <a class="header-anchor" href="#起步" aria-label="Permalink to &quot;起步&quot;">​</a></h1><blockquote><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fmicrosoft.github.io%2Fmonaco-editor%2F" target="_blank" rel="noreferrer">Monaco Editor</a> 是 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FMicrosoft%2Fvscode" target="_blank" rel="noreferrer">VS Code</a> 底层的代码编辑器，开源协议是MIT，支持Edge、 Chrome、Firefox、Safari和Opera浏览器，但是不支持移动端浏览器或移动端框架</p></blockquote><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#9DB1C5;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#9DB1C5;--shiki-dark:#98C379;"> monaco-editor</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#79B8FF;--shiki-dark:#D19A66;"> *</span><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;"> monaco</span><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &quot;monaco-editor/esm/vs/editor/editor.main.js&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="初始化编辑器" tabindex="-1">初始化编辑器 <a class="header-anchor" href="#初始化编辑器" aria-label="Permalink to &quot;初始化编辑器&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 初始化的dom节点</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;"> monacoEditor</span><span style="--shiki-light:#F97583;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;"> monaco</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">editor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">targetDom</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;"> { </span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">    value</span><span style="--shiki-light:#F97583;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 初始化值     </span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">    readOnly</span><span style="--shiki-light:#F97583;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#79B8FF;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 是否只读</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">    language</span><span style="--shiki-light:#F97583;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &#39;json&#39;</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 语言类型     </span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">    theme</span><span style="--shiki-light:#F97583;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &#39;vs-dark&#39;</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 主题 </span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 初始化编辑器的值 </span></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">monacoEditor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">setValue</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;">\`{&quot;key&quot;:&quot;value&quot;}\`</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">) </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 获取件编辑器的值 </span></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">monacoEditor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">getValue</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 注销编辑器实例 </span></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">monacoEditor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">dispose</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="在页面上加载monaco" tabindex="-1">在页面上加载Monaco <a class="header-anchor" href="#在页面上加载monaco" aria-label="Permalink to &quot;在页面上加载Monaco&quot;">​</a></h2><h2 id="载入自己的type-definition" tabindex="-1">载入自己的Type Definition <a class="header-anchor" href="#载入自己的type-definition" aria-label="Permalink to &quot;载入自己的Type Definition&quot;">​</a></h2><p>需要使用monaco.languages.typescript.javascriptDefaults.addExtraLib 以及 monaco.editor.createModel</p><p>提前准备index.d.ts，如果内容小直接塞代码里。 我这里直接把文件放到了public文件下面。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;"> libUri</span><span style="--shiki-light:#F97583;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &#39;ts:filename/index.d.ts&#39;</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;"> libSource</span><span style="--shiki-light:#F97583;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">await</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;"> axios</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;">&quot;index.d.ts&quot;</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">)).</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">monaco</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">languages</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">typescript</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">javascriptDefaults</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">addExtraLib</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">      libSource</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">      libUri</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">  );</span></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">monaco</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">editor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">createModel</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">libSource</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &#39;typescript&#39;</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;"> monaco</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">Uri</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">libUri</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;"> {} </span><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &quot;echarts/charts.d.ts&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="注册主题" tabindex="-1">注册主题 <a class="header-anchor" href="#注册主题" aria-label="Permalink to &quot;注册主题&quot;">​</a></h2><p>主题的配置创建完成之后，我们可以在 monaco-editor 中定义属于我们的主题了：</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#79B8FF;--shiki-dark:#D19A66;"> *</span><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;"> monaco</span><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &quot;monaco-editor&quot;</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;"> theme</span><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &#39;../lib/markdownEx-theme.js&#39;</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">monaco</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">editor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">defineTheme</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;">&quot;acrmd&quot;</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;"> theme</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;"> mdEditor</span><span style="--shiki-light:#F97583;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;"> monaco</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">editor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">containerDom</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">    value</span><span style="--shiki-light:#F97583;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">    theme</span><span style="--shiki-light:#F97583;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#FFAB70;--shiki-dark:#98C379;"> &quot;acrmd&quot;</span><span style="--shiki-light:#BBBBBB;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#6B737C;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //...</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>&lt;template&gt;</span></span>
<span class="line"><span>  &lt;el-button type=&quot;primary&quot; @click=&quot;run&quot;&gt;运行&lt;/el-button&gt;</span></span>
<span class="line"><span>  &lt;div ref=&quot;editContainer&quot; class=&quot;code-editor&quot;&gt;&lt;/div&gt;</span></span>
<span class="line"><span>&lt;/template&gt;</span></span>
<span class="line"><span>&lt;script setup lang=&quot;ts&quot;&gt;</span></span>
<span class="line"><span>import { onMounted, ref } from &quot;vue&quot;</span></span>
<span class="line"><span>import TsWorker from &quot;monaco-editor/esm/vs/language/typescript/ts.worker?worker&quot;</span></span>
<span class="line"><span>import EditorWorker from &quot;monaco-editor/esm/vs/editor/editor.worker?worker&quot;</span></span>
<span class="line"><span>import * as monaco from &quot;monaco-editor&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// @ts-ignore</span></span>
<span class="line"><span>self.MonacoEnvironment = {</span></span>
<span class="line"><span>  getWorker(_: string, label: string) {</span></span>
<span class="line"><span>    if ([&quot;typescript&quot;, &quot;javascript&quot;].includes(label)) {</span></span>
<span class="line"><span>      return new TsWorker()</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return new EditorWorker()</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const props = defineProps&lt;{</span></span>
<span class="line"><span>  modelValue: string</span></span>
<span class="line"><span>}&gt;()</span></span>
<span class="line"><span>const emits = defineEmits&lt;{</span></span>
<span class="line"><span>  (e: &quot;update:modelValue&quot;, b: string): void</span></span>
<span class="line"><span>  (e: &quot;run&quot;): void</span></span>
<span class="line"><span>}&gt;()</span></span>
<span class="line"><span>const run = () =&gt; {</span></span>
<span class="line"><span>  emits(&quot;run&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// watch(</span></span>
<span class="line"><span>//   () =&gt; props.value,</span></span>
<span class="line"><span>//   value =&gt; {</span></span>
<span class="line"><span>//     // 防止改变编辑器内容时光标重定向</span></span>
<span class="line"><span>//     if (value !== monacoEditor?.getValue()) {</span></span>
<span class="line"><span>//       monacoEditor.setValue(value)</span></span>
<span class="line"><span>//     }</span></span>
<span class="line"><span>//   }</span></span>
<span class="line"><span>// )</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const editContainer = ref&lt;null | HTMLElement&gt;(null)</span></span>
<span class="line"><span>onMounted(() =&gt; {</span></span>
<span class="line"><span>  // 自定义代码补全</span></span>
<span class="line"><span>  const keywords = [&quot;options&quot;]</span></span>
<span class="line"><span>  monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({</span></span>
<span class="line"><span>    noSemanticValidation: true,</span></span>
<span class="line"><span>    noSyntaxValidation: false</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>  monaco.languages.typescript.javascriptDefaults.setCompilerOptions({</span></span>
<span class="line"><span>    target: monaco.languages.typescript.ScriptTarget.ES2016,</span></span>
<span class="line"><span>    allowNonTsExtensions: true</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>  monaco.languages.registerCompletionItemProvider(&quot;typescript&quot;, {</span></span>
<span class="line"><span>    provideCompletionItems: () =&gt; {</span></span>
<span class="line"><span>      let suggestions: any[] = []</span></span>
<span class="line"><span>      keywords.forEach(item =&gt; {</span></span>
<span class="line"><span>        suggestions.push({</span></span>
<span class="line"><span>          detail: &quot;任何文字提示&quot;, // 代码补全右侧文本提示</span></span>
<span class="line"><span>          label: item, // 代码补全左侧文本</span></span>
<span class="line"><span>          insertText: item, // 插入编辑器中的补全代码</span></span>
<span class="line"><span>          kind: monaco.languages.CompletionItemKind.Function // 代码补全最左侧显示的图标</span></span>
<span class="line"><span>        })</span></span>
<span class="line"><span>      })</span></span>
<span class="line"><span>      return {</span></span>
<span class="line"><span>        suggestions: suggestions</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>  const monacoEditor = monaco.editor.create(editContainer.value as HTMLElement, {</span></span>
<span class="line"><span>    value: props.modelValue,</span></span>
<span class="line"><span>    readOnly: false, // 只读</span></span>
<span class="line"><span>    language: &quot;typescript&quot;, // 语言</span></span>
<span class="line"><span>    theme: &quot;vs-dark&quot;, // 主题，黑暗主题为vs-dark</span></span>
<span class="line"><span>    selectOnLineNumbers: true, // 选中行数</span></span>
<span class="line"><span>    automaticLayout: true, // 自动调整布局</span></span>
<span class="line"><span>    fontSize: 18, //字体大小</span></span>
<span class="line"><span>    autoIndent: &quot;keep&quot;, //自动空行</span></span>
<span class="line"><span>    folding: true, // 是否启用代码折叠</span></span>
<span class="line"><span>    scrollBeyondLastLine: false, // 不到最后一行就开始滚动</span></span>
<span class="line"><span>    wordWrap: &quot;on&quot;, // 自动换行</span></span>
<span class="line"><span>    showUnused: false // 不显示未使用的变量</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // 编辑器内容发生变化时触发</span></span>
<span class="line"><span>  monacoEditor.onDidChangeModelContent(() =&gt; {</span></span>
<span class="line"><span>    const currenValue = monacoEditor?.getValue() // 获取编辑器内容</span></span>
<span class="line"><span>    emits(&quot;update:modelValue&quot;, currenValue) // 传递父组件v-model值</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span>&lt;/script&gt;</span></span>
<span class="line"><span>&lt;style&gt;</span></span>
<span class="line"><span>.code-editor {</span></span>
<span class="line"><span>  height: 100%;</span></span>
<span class="line"><span>  /* border: 1px solid skyblue; */</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>&lt;/style&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br></div></div><h2 id="更新编辑器配置" tabindex="-1">更新编辑器配置 <a class="header-anchor" href="#更新编辑器配置" aria-label="Permalink to &quot;更新编辑器配置&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes min-dark one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#E5C07B;">monacoEditor</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#B392F0;--shiki-dark:#61AFEF;">updateOptions</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">({</span><span style="--shiki-light:#B392F0;--shiki-dark:#E06C75;">readOnly</span><span style="--shiki-light:#F97583;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#79B8FF;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#B392F0;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,19)]))}const B=n(l,[["render",e]]);export{d as __pageData,B as default};
